<!DOCTYPE html>
<html>
	<head>
		<title>Home</title>
	</head>
	<body onload="setup()">
		<script>
			var xhr;
			function setup()
			{
				xhr = new XMLHttpRequest();
				//configuro la callback per la risposta
				xhr.onload = function()
                {
					document.getElementById('risposta').innerHTML = xhr.response;
				};
				//configuro la callback di errore
				xhr.onerror = function()
                { 
					alert('Errore');
				};
			}
			function scelta_metodo()
			{
				switch(document.getElementById('metodo').value)
				{
					case "get":
						document.getElementById('get').hidden=false
						document.getElementById('risposta').innerHTML='';
					break;
					case "post":
					break;
					case "delete":
					break;
					case "patch":
					break;
					case "put":
					break;
					default:
					break;
				}
			}
			function radio_get()
			{
				if(document.getElementById('radio_id').checked)
					document.getElementById('id_get').hidden=false;
				else
					document.getElementById('id_get').hidden=true;
			}
			function get()
			{	
				//con ID
				if((document.getElementById('id_get').value!="")&&!document.getElementById('tutto_get').checked)
				{
					if(document.getElementById('tabella').value=='class')
					{
						xhr.open("GET", ('classes.php/'+document.getElementById('id_get').value), true);
					}
					else
					{
						xhr.open("GET", ('students.php/'+document.getElementById('id_get').value), true);
					}
				//senza ID (tutti i record)
				}else
				{
					if(document.getElementById('tabella').value=='class')
					{
						xhr.open("GET", 'classes.php', true);
					}
					else
					{
						xhr.open("GET", 'students.php', true);
					}
				}
				xhr.send();
			}
		</script>
		<div>
			<select id="metodo" onchange="scelta_metodo()">
				<option value="default">Seleziona il metodo</option>
				<option value="get">GET</option>
				<option value="post">POST</option>
				<option value="delete">DELETE</option>
				<option value="patch">PATCH</option>
				<option value="put">PUT</option>
			</select>
			<div id="get" hidden=true>
				Seleziona la tabella: 
				<select id="tabella"> 
					<option value="student">Student</option> 
					<option value="class">Class</option> 
				</select> 
				<input id="tutto_get" type="radio" name="get" value="tutto" onchange="radio_get()">Tutto <input id="radio_id" type="radio" name="get" value="ID" onchange="radio_get()">
				Con ID <input type="text" id="id_get" hidden=true> 
				<input type="button" onclick="get()" value="Invia">
			</div>
		</div>
		<p>Risposta:</p>
		<div id="risposta"></div>
	</body>
</html>